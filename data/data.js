const YEAR = "2025";
//2023
//const SCHEDULEK_2 = {name: "K - 2", data: "n,name,location,firstTeacher,start,stop;1,Oscar Grouch,Gym,Hanlon,09:15,09:25;2,Just Dance,Gym,Ramons,09:25,09:35;3,Gymnastics Course,Gym,Gadsen,09:35,09:45;4,Transition,,,09:45,09:55;5,Water Balloon Relay,Blacktop by STEM portables,Menjivar,09:55,10:05;6,Parachute,Black top,Dean,10:05,10:15;7,Ring Toss,Black top,Campbell,10:15,10:25;8,Scooter Relay,Black top,,10:25,10:35;9,Sponge Relay,Blacktop,Wang,10:35,10:45;10,Hula Hoops,Behind portables,Ordonez,10:45,10:55;11,Fire & Ice tag,Behind playground,Lo,10:55,11:05;12,Bocce,Field,Linteris,11:05,11:15;Lunch,Lunch,,,11:15,12:20;13,Team tag,Field,Castro,12:20,12:30;14,Scoops,Field,Dorfman,12:30,12:40;15,Sharks & Minnows,Field,Morales,12:40,12:50;16,Soccer Pirates,Field,Rios,12:50,01:00;17,Hockey,Field,Batson,01:00,01:10;18,Bowling,Field,Garcia,01:10,01:20;19,Lollipop Paddles,Field,Aguilar,01:20,01:30;20,Clean-up the backyard,Field,Harris,01:30,01:40;21,Jump ropes,Field,Do,01:40,01:50;22,Memories / Chalk,Sidewalk in front of 4th grade portables,Weaver,01:50,02:00;23,Transition to gym,,Wilkerson,02:00,02:10"};
//const SCHEDULE3_5 = {name: "3 - 5", data:"n,name,location,firstTeacher,start,stop;1,Volleyball,Gym,G,09:15,09:27;2,Obstacle Course,Gym,Shields,09:27,09:37;3,Transition,,Galbreath,09:37,09:47;4,Water balloon relay,Blacktop by STEM portables,Gomez,09:47,09:57;5,Satellite,Black top,Joyner,09:57,10:07;6,Scooter Relay,Black top,,10:07,10:17;7,Playground,,Delgado,10:17,10:27;8,Fire & Ice tag,Field,Macario,10:27,10:37;9,Soccer Pirates,Field,Parks,10:37,10:47;10,Football Challenge,Field,Molina,10:47,10:57;11,Team Tag,Field,Armstrong,10:57,11:07;Lunch,Lunch,,,11:07,12:10;12,Hockey Pirates,Field,,12:10,12:22;13,Home run Derby,Field,Ward,12:22,12:34;14,Frisbee,Field,Francois,12:34,12:46;15,Soccer,Field,Gayle,12:46,12:58;16,Golf Putting,Field,Christie,12:58,01:10;17,Memories / Chalk,Sidewalk in front of 4th grade portables,Bangura,01:10,01:22;18,Jump Ropes,Grass next to sidewalk,,01:22,01:34;19,Badminton Keep-up,Bus loop,,01:34,01:46;20,Sponge Relay,Bus loop,,01:46,01:58;21,Transition to gym,hallways,,01:58,02:10"};
//2024
//const SCHEDULEK_2 = {name: "K - 2", data: "n,name,location,firstTeacher,start,stop;1,Oscar Grouch,Gym,Hanlon,09:15,09:25;2,Just Dance,Gym,Ramons,09:25,09:35;3,Gymnastics Course,Gym,Gadson,09:35,09:45;4,Transition,,,09:45,09:55;5,Water Balloon Relay,Right blacktop,Menjivar,09:55,10:05;6,Sponge Relay,Right blacktop,Dean,10:05,10:15;7,Ring Toss,Right blacktop,Campbell,10:15,10:25;8,Scooter Relay,Left blacktop,,10:25,10:35;9,Clean Up the backyard,Left blacktop,Wang,10:35,10:45;10,Hula Hoops,behind playground,Ordonez,10:45,10:55;11,Fire & Ice tag,Behind playground,Lo,10:55,11:05;12,Bocce,Field,Linteris,11:05,11:15;Lunch,Lunch,,,11:15,12:20;13,Team tag,Field,Castro,12:20,12:30;14,Scoops,Field,Bray,12:30,12:40;15,Sharks & Minnows,Field,Morales,12:40,12:50;16,Soccer Pirates,Field,,12:50,01:00;17,Hockey,Field,Rios,01:00,01:10;18,Bowling,Field,Garcia,01:10,01:20;19,Lollipop Paddles,Field,Aguilar,01:20,01:30;20,Parachute,Field,Harris,01:30,01:40;21,Memories/chalk,Sidewalk in front of 4th grade portables,Do,01:40,01:50;22,Jump Ropes,By tree next to daycare doors,Weaver,01:50,02:00;23,Transition to gym,,Wilkerson,02:00,02:10"};
//const SCHEDULE3_5 = {name: "3 - 5", data: "n,name,location,firstTeacher,start,stop;1,Volleyball,Gym,Joyner,09:15,09:25;2,Obstacle Course,Gym,Mills,09:25,09:35;3,Transition,,Jordan,09:35,09:45;4,Water balloon relay,Right blacktop,G,09:45,10:00;5,Sponge Relay,right blacktop,Gomez,10:00,10:10;6,Scooter Relay,Right blacktop,Galbreath,10:10,10:20;7,Satellite,Left blacktop,,10:20,10:30;8,Golf Putting,Left blacktop,Woods,10:31,10:41;9,Musical Chairs,media center,Francois,10:42,10:52;10,Transition to field,,Gayle,10:52,11:03;Lunch,Lunch,,,11:10,12:10;11,Badminton Keep-up,Field,Rivera,12:10,12:21;12,Team tag,Field,,12:21,12:32;13,Hockey pirates,Field,Christie,12:32,12:43;14,Soccer game,Field,Matthews,12:43,12:54;15,Sharks & Minnows,Field,Delgado,12:54,01:05;16,hula hoops/jump ropes,Field,Ward,01:05,01:16;17,Frisbee knock down,Field,Wells,01:16,01:27;18,home run derby,backstop,,01:27,01:38;19,memories and chalk,in front of 4th grade portables,,01:38,01:49;20,transition to gym,,,01:49,02:00"};
//2025
const SCHEDULEK_2 = {name: "K - 2", data: "n,name,location,firstTeacher,start,stop;1,Oscar the Grouch,Gym,Rubio,9:30,9:40;2,Just Dance,Gym,Menjivar,9:40,9:50;3,Transition to blacktop,Gym,Dean,9:50,10:00;4,Water balloon relay,Portables,Ramos,10:00,10:10;5,Sponge relay,Right blacktop,Hanlon,10:10,10:20;6,Ring toss,Right blacktop,Wang,10:20,10:30;7,Scooter Relay,Right blacktop,Joyner,10:30,10:40;8,Bowling,Left blacktop,Castro,10:40,10:50;9,Playground,Left blacktop,Do,10:50,11:00;10,Fire and Ice tag,behind playground,Lo,11:00,11:10;Lunch,Lunch,,,11:15,12:15;11,Team Tag,Field,Bray,12:20,12:30;12,Scoops,Field,Wilkerson,12:30,12:40;13,Soccer Pirates,Field,Weaver,12:40,12:50;14,Hula hoops,Field,Harris,12:50,1:00;15,Lollipop paddles,Field,Martinez,1:00,1:10;16,Parachute,Field,Gadson,1:10,1:20;17,Clean up the backyard,Field,Aguilar,1:20,1:30;18,Jump ropes,Field,Garcia,1:30,1:40;19,Memories/Chalk,Sidewalk in front of 4th grade portables,,1:40,1:50;20,Transition to gym,By tree next to daycare doors,,1:50,2:00"};
const SCHEDULE3_5 = {name: "3 - 5", data: "n,name,location,firstTeacher,start,stop;1,Volleyball,Gym,G,9:30,9:40;2,Oscar the grouch,Gym,Ordonez,9:40,9:50;3,Transition to blacktop,Hallway,Galbreath,9:50,10:00;4,Water balloon relay,Portables,Gomez,10:00,10:10;5,Sponge relay,Right blacktop,Morales,10:10,10:20;6,Scooter relay,Right blacktop,Gayle,10:20,10:30;7,Basketball,Right blacktop,McCahan,10:30,10:40;8,Golf,Left blacktop,Rivera,10:40,10:50;9,Badminton,Left blacktop,Francois,10:50,11:00;10,Team tag,behind playground,Delgado,11:00,11:10;Lunch,Lunch,,,11:15,12:15;11,Hockey pirates,Field,Macario,12:20,12:30;12,Soccer game,Field,Christie,12:30,12:40;13,Pinball,Field,Matthews,12:40,12:50;14,Sharks and Minnows,Field,Ward,12:50,1:00;15,Hula hoops/Jump Ropes,Field,Couch,1:00,1:10;16,Frisbee,Field,,1:10,1:20;17,Home Run derby,Field,,1:20,1:30;18,Memories/Chalk,Sidewalk in front of 4th grade portables,,1:30,1:40;19,Transition to Media Center,Pre-K door,,1:40,1:50;20,Musical Chairs,Media Center,,1:50,2:00"};//const SCHEDULEK_2 = {name: "K - 2", data: ""};

function csvStringToArrayOfObjects(csvString) {
    const lines = csvString.split(';');
    const headers = lines.shift().split(',');
  
    return lines.map(line => {
      const values = line.split(',');
      return headers.reduce((object, header, index) => {
        object[header] = values[index];
        return object;
      }, {});
    });
  }
  
function getTeacherSchedules(stations, times) {
    let teachers = [];//[{name: "Select a Teacher", schedule:[]}];
    const lunchIndex = teachers.findIndex(obj => obj.n === "Lunch");

    stations.forEach((station, index) => {
      if (station.firstTeacher !== '') {
        let schedule = [];
        for (let i = 0; i < stations.length; i++) {
          const { n, name, location } = stations[(i + index) % stations.length];

          if (stations[schedule.length % stations.length].n == "Lunch") {
            schedule.push({n:"Lunch", name:"Lunch", location:'' });
          }
          if (n != "Lunch") {
            schedule.push({n, name, location });
          }
        }
        
        const updatedSchedule = schedule.reduce((acc, curr, i) => {
          acc.push({...curr, start: times[i].start, stop: times[i].stop });
          return acc;
        }, []);
        
        teachers.push({name: station.firstTeacher, schedule: updatedSchedule});
      }
    });
    return teachers;
}

function getStationsSchedules(stations, teachers, times){
  console.log('stations', stations);
  stations.forEach(station =>{
    station.schedule = times.map(block =>{
      return {n: block.n, teacher:'', start: block.start, stop: block.stop}
    })
  });

  teachers.forEach(teacher => {
    console.log("data 58", teacher);
    teacher.schedule.forEach((station, index) =>{
      const teacherStation = stations.find(s => s.name === station.name );
      console.log("data 61", station);
      teacherStation.schedule[index].teacher = teacher.name;
   })
  });
}

const HEADERS = ['#f66', '#fa0', '#ff0', '#5d0', '#6db', '#6af', '#c6d', '#999'];
const ROWS =    ['#fdd', '#fea', '#ffa', '#dfb', '#dfe', '#def', '#edf', '#eee'];

const random = (min=0, max=EMOJIS.length - 1) => Math.floor(Math.random() * (max - min + 1)) + min;